/* Theme: Classic */
/* Elegant, Serif, Traditional */

@import url('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Gelasio:ital,wght@0,400;0,700;1,400;1,700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&display=swap');

:root {
    --classic-font-family: 'Merriweather', 'Georgia', serif;
    --classic-font-size: 16px;
    --classic-line-height: 1.6;
    --classic-bg-color: #fff;
    --classic-text-color: #111;
    --classic-max-width: 800px;
    --classic-texture: none;
    --classic-header-color: #000;
    --classic-link-color: #000;
}

/* Base Styles */
body {
    font-family: 'Merriweather', 'Georgia', serif; /* Default fallback */
    font-family: var(--classic-font-family);
    color: #111; /* Default fallback */
    color: var(--classic-text-color);
    line-height: 1.6;
    line-height: var(--classic-line-height);
    background-color: #fff; /* Default fallback */
    background-color: var(--classic-bg-color);
    background-image: none; /* Default fallback */
    background-image: var(--classic-texture);
    font-size: 16px; /* Default fallback */
    font-size: var(--classic-font-size);
    margin: 0;
    padding: 40px;
    min-height: 100vh;
    transition: background-color 0.3s, color 0.3s;
}

/* Container for content to control width */
body > * {
    max-width: 800px;
    max-width: var(--classic-max-width);
    margin-left: auto;
    margin-right: auto;
}

/* Reader View Textures - Explicit Overrides for PDF/No-Var Support */
body.texture-paper {
    --classic-bg-color: #f4ecd8;
    --classic-texture: url('https://www.transparenttextures.com/patterns/cream-paper.png');
    background-color: #f4ecd8;
    background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
}

body.texture-sepia {
    --classic-bg-color: #e8dcb5;
    --classic-texture: url('https://www.transparenttextures.com/patterns/natural-paper.png'); 
    background-color: #e8dcb5;
    background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
}

body.texture-dark {
    --classic-bg-color: #222;
    --classic-text-color: #ddd;
    --classic-header-color: #fff;
    --classic-link-color: #ccc;
    --classic-texture: url('https://www.transparenttextures.com/patterns/dark-matter.png');
    
    background-color: #222;
    color: #ddd;
    background-image: url('https://www.transparenttextures.com/patterns/dark-matter.png');
}

body.texture-dark h1, 
body.texture-dark h2, 
body.texture-dark h3, 
body.texture-dark h4, 
body.texture-dark h5, 
body.texture-dark h6 {
    color: #fff;
}

body.texture-dark h1 {
    border-bottom-color: #fff;
}

body.texture-dark a {
    color: #ccc;
}

/* Reader View Fonts - Explicit Overrides for PDF/No-Var Support */
body.font-merriweather {
    --classic-font-family: 'Merriweather', 'Georgia', serif;
    font-family: 'Merriweather', 'Georgia', serif;
}

body.font-georgia {
    --classic-font-family: 'Gelasio', 'Georgia', serif;
    font-family: 'Gelasio', 'Georgia', serif;
}

body.font-times {
    --classic-font-family: 'Tinos', 'Times New Roman', 'Liberation Serif', serif;
    font-family: 'Tinos', 'Times New Roman', 'Liberation Serif', serif;
}

body.font-arial {
    --classic-font-family: 'Arial', 'Liberation Sans', sans-serif;
    font-family: 'Arial', 'Liberation Sans', sans-serif;
}

/* Apply font overrides to headers too */
body.font-merriweather h1, body.font-merriweather h2, body.font-merriweather h3 { font-family: 'Merriweather', 'Georgia', serif; }
body.font-georgia h1, body.font-georgia h2, body.font-georgia h3 { font-family: 'Gelasio', 'Georgia', serif; }
body.font-times h1, body.font-times h2, body.font-times h3 { font-family: 'Tinos', 'Times New Roman', 'Liberation Serif', serif; }
body.font-arial h1, body.font-arial h2, body.font-arial h3 { font-family: 'Arial', 'Liberation Sans', sans-serif; }


/* Headers */
h1, h2, h3, h4, h5, h6 {
    font-family: 'Merriweather', 'Georgia', serif; /* Default fallback */
    font-family: var(--classic-font-family);
    color: #000; /* Default fallback */
    color: var(--classic-header-color);
    margin-top: 1.2em;
    margin-bottom: 0.5em;
}

h1 {
    font-size: 2.2em;
    font-weight: normal;
    text-align: center;
    border-bottom: 1px solid #000; /* Default fallback */
    border-bottom: 1px solid var(--classic-header-color);
    padding-bottom: 15px;
    margin-bottom: 20px;
    letter-spacing: 2px;
}

h2 {
    font-size: 1.4em;
    font-weight: bold;
    border-bottom: 1px solid #ccc;
    padding-bottom: 3px;
    margin-top: 25px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

h3 {
    font-size: 1.1em;
    font-weight: bold;
    font-style: italic;
}

/* Links */
a {
    color: #000; /* Default fallback */
    color: var(--classic-link-color);
    text-decoration: underline;
}

a:hover {
    color: #333;
}

/* Lists */
ul {
    list-style-type: disc;
    padding-left: 20px;
}

li {
    margin-bottom: 3px;
}

/* Theme Switcher Styles */
#theme-switcher {
    background: #fff; /* Default fallback */
    background: var(--classic-bg-color);
    border: 1px double #000; /* Default fallback */
    border: 1px double var(--classic-header-color);
    padding: 15px;
    border-radius: 0;
    box-shadow: 3px 3px 0px rgba(0,0,0,0.1);
    font-family: 'Georgia', serif;
    font-size: 14px;
    color: #111; /* Default fallback */
    color: var(--classic-text-color);
}

#theme-switcher label {
    font-weight: normal;
    font-style: italic;
    display: block;
    margin-bottom: 8px;
    color: #111; /* Default fallback */
    color: var(--classic-text-color);
}

#theme-select, 
#reader-font, 
#reader-texture {
    padding: 5px;
    width: 100%;
    border: 1px solid #000; /* Default fallback */
    border: 1px solid var(--classic-header-color);
    border-radius: 0;
    font-family: 'Georgia', serif;
    background: #fff; /* Default fallback */
    background: var(--classic-bg-color);
    color: #111; /* Default fallback */
    color: var(--classic-text-color);
}

/* Reader View Controls */
.reader-controls {
    margin-top: 15px;
    border-top: 1px solid #ccc;
    padding-top: 10px;
}

.reader-control-group {
    margin-bottom: 10px;
}

.reader-control-group label {
    font-size: 0.9em;
    margin-bottom: 4px;
}

.range-slider {
    width: 100%;
}

/* Footer */
.footer {
    margin-top: 2em;
    padding-top: 1em;
    border-top: 1px solid #ccc;
    text-align: center;
    font-size: 0.9em;
    font-style: italic;
    color: #555;
}

/* Print Styles */
@media print {
    body {
        padding: 0;
        margin: 0;
        font-size: 11pt;
        line-height: 1.4;
        background: #fff !important;
        color: #000 !important;
        background-image: none !important;
    }
    
    /* Allow textures to print if specifically requested via class */
    body.texture-paper {
        background-color: #f4ecd8 !important;
        background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png') !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    body.texture-sepia {
        background-color: #e8dcb5 !important;
        background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png') !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    body.texture-dark {
        background-color: #222 !important;
        color: #ddd !important;
        background-image: url('https://www.transparenttextures.com/patterns/dark-matter.png') !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }
    
    /* Ensure font overrides work in print */
    body.font-merriweather, body.font-merriweather h1, body.font-merriweather h2 { font-family: 'Merriweather', 'Georgia', serif !important; }
    body.font-georgia, body.font-georgia h1, body.font-georgia h2 { font-family: 'Gelasio', 'Georgia', serif !important; }
    body.font-times, body.font-times h1, body.font-times h2 { font-family: 'Tinos', 'Times New Roman', 'Liberation Serif', serif !important; }
    body.font-arial, body.font-arial h1, body.font-arial h2 { font-family: 'Arial', 'Liberation Sans', sans-serif !important; }

    h1, h2, h3, h4, h5, h6 {
        color: #000 !important;
    }
    
    /* Override header colors for dark mode print */
    body.texture-dark h1, 
    body.texture-dark h2, 
    body.texture-dark h3 {
        color: #fff !important;
    }
    
    body.texture-dark h1 {
        border-bottom-color: #fff !important;
    }

    h1 {
        font-size: 18pt;
        margin-bottom: 10px;
        padding-bottom: 5px;
        border-bottom-color: #000 !important;
    }

    h2 {
        font-size: 14pt;
        margin-top: 10px;
        border-bottom: 1px solid #999;
    }

    h3 {
        font-size: 12pt;
    }
    
    /* Hide download link */
    a[href$=".pdf"],
    .footer {
        display: none !important;
    }
    
    /* Reset margins for print to let the printer handle it */
    html, body {
        margin: 0 !important;
        padding: 10mm !important;
        /* Only reset background if NO texture class is present */
    }
    
    body:not(.texture-paper):not(.texture-sepia):not(.texture-dark) {
        background: #fff !important;
    }

    #theme-switcher {
        display: none !important;
    }
}
